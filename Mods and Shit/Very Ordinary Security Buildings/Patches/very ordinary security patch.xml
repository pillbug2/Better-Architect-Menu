<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<Operation Class="PatchOperationAddModExtension">
		<success>Always</success>
		<xpath>Defs/DesignationCategoryDef[defName="VOSB_Categories"]</xpath>
		<value>
			<li Class="BetterArchitect.NestedCategoryExtension">
				<parentCategory>Security</parentCategory>
			</li>
		</value>
	</Operation>

	<Operation Class="PatchOperationAddModExtension">
		<success>Always</success>
		<xpath>Defs/DesignationCategoryDef[defName="VOSB_CategoriesSup"]</xpath>
		<value>
			<li Class="BetterArchitect.NestedCategoryExtension">
				<parentCategory>Security</parentCategory>
			</li>
		</value>
	</Operation>
	
<!-- WEAPONS -->

	<!--
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designationCategory="VOSB_Categories"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Weapons</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designationCategory="VOSB_CategoriesSup"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Weapons</designationCategory>
		</value>
	</Operation>
	-->
	
<!-- BARRICADES -->

	<!-- TODO check -->
	<!-- Some members are assigned different categories below. -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_Utilldropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_NanoBarricade"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSBInvisibleHand"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_BubbleShield"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_MomoyoHall"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_NuclearUmbrelladropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<!--  TODO check -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_ConservatorBase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<!--  TODO check -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_HNBase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Barricades</designationCategory>
		</value>
	</Operation>

	<!--  TODO check -->
	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_ConservatorBase"]/designatorDropdown</xpath>
	</Operation>

	<!--  TODO check -->
	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_HNBase"]/designatorDropdown</xpath>
	</Operation>
	
<!-- COMBAT INFRASTRUCTURE -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_EldenMessage"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_CombatInfrastructure</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_HDPBase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_CombatInfrastructure</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Nanowelder"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_CombatInfrastructure</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Patchworkerbase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_CombatInfrastructure</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_MomoFriendsBox"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_CombatInfrastructure</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_HDPBase"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Nanowelder"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Patchworkerbase"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_MomoFriendsBox"]/designatorDropdown</xpath>
	</Operation>
	
<!-- TRAPS -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_Trapdropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<!-- TODO re sort -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_Meleedropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_WallAttachSupdropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<!--  TODO check -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown="VOSB_Spikedropdown"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_NanoRegenSpikeWall"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Trapception"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<!-- TODO?? -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[designatorDropdown=""]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_TrapWarningSign"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_SFDBase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_BubbleFillerPodbase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Traps</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_SFDBase"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_BubbleFillerPodbase"]/designatorDropdown</xpath>
	</Operation>
	
<!-- MEDICAL -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Triage"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Medical</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_RegenLargeTurretBase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Medical</designationCategory>
		</value>
	</Operation>

	<!-- TODO test -->
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_AMP"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Medical</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_RegenLargeTurretBase"]/designatorDropdown</xpath>
	</Operation>

	<!-- TODO test -->
	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_AMP"]/designatorDropdown</xpath>
	</Operation>
	
<!-- FIREFIGHTING -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_FoamFoambase"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Firefoam</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_FoamFoambase"]/designatorDropdown</xpath>
	</Operation>
	
<!-- AIRFLOW -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_GasPurifierVent"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_AirManagement</designationCategory>
		</value>
	</Operation>
	
<!-- COOLING -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_CocytusTube"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Cooling</designationCategory>
		</value>
	</Operation>

<!-- CONTROL -->
	
	<!-- TODO test all -->

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Bucket"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Control</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_Bucket"]/designatorDropdown</xpath>
	</Operation>
	
<!-- MECHANOIDS or COMBAT INFRASTRUCTURE -->

	<!-- TODO test all -->

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/DesignationCategoryDef[defName="Ferny_Mechanoids"]</xpath>

		<match Class="PatchOperationSequential">
			<operations>
				
				<li Class="PatchOperationReplace">
					<success>Always</success>
					<xpath>Defs/ThingDef[defName="VOSB_FaradayBase"]/designationCategory</xpath>
					<value>
						<designationCategory>Ferny_Mechanoids</designationCategory>
					</value>
				</li>

				<li Class="PatchOperationRemove">
					<success>Always</success>
					<xpath>Defs/ThingDef[defName="VOSB_FaradayBase"]/designatorDropdown</xpath>
				</li>
				
			</operations>
		</match>

		<nomatch Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>Defs/ThingDef[defName="VOSB_FaradayBase"]/designationCategory</xpath>
			<value>
				<designationCategory>Ferny_CombatInfrastructure</designationCategory>
			</value>
		</nomatch>
		
	</Operation>
	
<!-- WALLS -->
	
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSB_NanoRegenWall"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Walls</designationCategory>
		</value>
	</Operation>
	
<!-- PRODUCTION -->
	
	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="VOSBProcurebench"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Production</designationCategory>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<success>Always</success>
		<xpath>Defs/ThingDef[defName="FACAssemblingMachine"]/designationCategory</xpath>
		<value>
			<designationCategory>Ferny_Production</designationCategory>
		</value>
	</Operation>
	
</Patch>
